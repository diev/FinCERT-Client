# FinCERT-Client
[![Build status](https://ci.appveyor.com/api/projects/status/hpsbfj3qds34i4yb?svg=true)](https://ci.appveyor.com/project/diev/fincert-client)
[![GitHub Release](https://img.shields.io/github/release/diev/FinCERT-Client.svg)](https://github.com/diev/FinCERT-Client/releases/latest)

Получение по API фидов и бюллетеней из FinCERT Банка России.

Здесь два проекта:

* FeedsAPI - обновленный до NET8 старый референсный проект для скачивания
фидов с добавлением двусторонней аутентификации TLS, которой в нем не было.
Развивать далее проект не планируется.
* FinCERT-Client - новый структурированный проект с добавлением Bulletins
API - возможность скачивать бюллетени и файлы к ним - в дополнение к фидам.

### Feeds API / Фиды

Фиды скачиваются актуальные, затирая прежние, контроль необходимости
обновления пока не ведется.

### Bulletins API / Бюллетени 

Бюллетени скачиваются в отдельные папки с датой, временем, названием.
Внутри каждой папки есть файл Bulletin.txt, в котором то же, что видно и
в ЛК, а также все файлы, которые были приложениями к бюллетеню.

По умолчанию скачивается до 100 (ограничение API) последних бюллетеней,
пока не обнаружатся папки с именами, которые уже были ранее скачаны.
Параметры для возможности скачивания ранее этих 100 будут добавлены позже.

## Config / Конфигурация

При первом запуске и отсутствии файла конфигурации `.config.json` он
создается рядом с программой с параметрами по умолчанию.
Никакие другие конфиги, переменные среды окружения и т.п. не используются.

Важно заполнить вашими данными значения параметров:

* `MyThumbprint`
* `Login`
* `Password`

Если указываете файловые пути, то по правилам JSON надо удваивать `\\`.

## Parameters / Опциональные параметры командной строки

* `-checklist` - сформировать в папке `BulletinsDownloads\CheckList`
комплект файлов для приложения к чек-листу на подключение.

## Requirements / Требования

* .NET 8
* CryptoPro CSP
* Сертификат TLS клиента и цепочка доверия
* Логин и пароль

## Versioning / Порядок версий

Номер версии программы указывается по нарастающему принципу:

* Требуемая версия .NET (8);
* Год текущей разработки (2024);
* Месяц без первого нуля и день редакции (624 - 24.06.2024);
* Номер билда - просто нарастающее число для внутренних отличий.
Если настроен сервис AppVeyor, то это его автоинкремент.

Продукт развивается для собственных нужд, и поэтому
Breaking Changes могут случаться чаще, чем это принято в SemVer.

При обновлении программы рекомендуется сохранить предыдущий конфиг,
удалить его из папки с программой, чтобы она создала новый, перенести
необходимые старые значения в новый конфиг перед новым запуском
программы.

## License / Лицензия

Licensed under the [Apache License, Version 2.0](LICENSE).
